package main

import (
	"fmt"
	"math"
	"sort"
	"strings"

	"github.com/fenglyu/projecteuler/golang/common"
)

func printExponent(powers []int) string {
	var b strings.Builder
	var c = 1
	for _, v := range powers {
		c *= v
	}
	fmt.Fprintf(&b, "%d", c)
	return b.String()
}

func equalInt(base int, powers []int, power int) int {

	num := 0
	var sumF, baseF float64
	sumF = 1
	baseF = float64(base)

	for i, v := range powers {
		sumF = math.Pow(baseF, float64(v))
		// base > 100 or exponent < 2
		if common.FloatCompare(sumF, 100.0) > 0 || i == len(powers)-1 {
			break
		}

		fmt.Println(power, sumF, "**", printExponent(powers[i+1:]), "==", base, "**", power, "->", base, powers)
		baseF = sumF
		num++
	}

	//	fmt.Println(base, power, powers, num)
	return num
}

func main() {

	m := make(map[int][]int)
	for i := 2; i < 101; i++ {
		res := common.DivisorV3(i)
		if len(res) < 2 {
			continue
		}
		//		fmt.Println("num: ", i, res)
		m[i] = res
	}

	// To store the keys in slice in sorted order
	var keys []int
	for k := range m {
		keys = append(keys, k)
	}
	sort.Ints(keys)
	//	fmt.Println("map: ", m)
	sum := 0
	for j := 2; j <= 100; j++ {
		//j := 2
		for v := range keys {
			//fmt.Println(k, v)
			t := equalInt(j, m[v], v)
			sum += t
		}
	}

	fmt.Println("found: ", sum)
	fmt.Println("sum: ", 99*99-sum)
}

/*

Consider all integer combinations of ab for 2 ≤ a ≤ 5 and 2 ≤ b ≤ 5:
2**2=4,  2**3=8,   2**4=16,  2**5=32
3**2=9,  3**3=27,  3**4=81,  3**5=243
4**2=16, 4**3=64,  4**4=256, 4**5=1024
5**2=25, 5**3=125, 5**4=625, 5**5=3125
If they are then placed in numerical order, with any repeats removed, we get the following sequence of 15 distinct terms:

4, 8, 9, 16, 25, 27, 32, 64, 81, 125, 243, 256, 625, 1024, 3125

How many distinct terms are in the sequence generated by ab for 2 ≤ a ≤ 100 and 2 ≤ b ≤ 100?

python one-liner
```
>>> len(set(a**b for a in range(2, 101) for b in range(2, 101)))
9183

```

go run  29.go |grep '2 \[' |sort -k8,8n

/*
python 29.py|grep '(2, '  |sort -k4,4n -k2,2n

(2, 4) => 4 2
(2, 6) => 4 3
(2, 8) => 4 4
(2, 10) => 4 5
(2, 12) => 4 6
(2, 14) => 4 7
(2, 16) => 4 8
(2, 18) => 4 9
(2, 20) => 4 10
(2, 22) => 4 11
(2, 24) => 4 12
(2, 26) => 4 13
(2, 28) => 4 14
(2, 30) => 4 15
(2, 32) => 4 16
(2, 34) => 4 17
(2, 36) => 4 18
(2, 38) => 4 19
(2, 40) => 4 20
(2, 42) => 4 21
(2, 44) => 4 22
(2, 46) => 4 23
(2, 48) => 4 24
(2, 50) => 4 25
(2, 52) => 4 26
(2, 54) => 4 27
(2, 56) => 4 28
(2, 58) => 4 29
(2, 60) => 4 30
(2, 62) => 4 31
(2, 64) => 4 32
(2, 66) => 4 33
(2, 68) => 4 34
(2, 70) => 4 35
(2, 72) => 4 36
(2, 74) => 4 37
(2, 76) => 4 38
(2, 78) => 4 39
(2, 80) => 4 40
(2, 82) => 4 41
(2, 84) => 4 42
(2, 86) => 4 43
(2, 88) => 4 44
(2, 90) => 4 45
(2, 92) => 4 46
(2, 94) => 4 47
(2, 96) => 4 48
(2, 98) => 4 49
(2, 100) => 4 50
(2, 6) => 8 2
(2, 9) => 8 3
(2, 12) => 8 4
(2, 15) => 8 5
(2, 18) => 8 6
(2, 21) => 8 7
(2, 24) => 8 8
(2, 27) => 8 9
(2, 30) => 8 10
(2, 33) => 8 11
(2, 36) => 8 12
(2, 39) => 8 13
(2, 42) => 8 14
(2, 45) => 8 15
(2, 48) => 8 16
(2, 51) => 8 17
(2, 54) => 8 18
(2, 57) => 8 19
(2, 60) => 8 20
(2, 63) => 8 21
(2, 66) => 8 22
(2, 69) => 8 23
(2, 72) => 8 24
(2, 75) => 8 25
(2, 78) => 8 26
(2, 81) => 8 27
(2, 84) => 8 28
(2, 87) => 8 29
(2, 90) => 8 30
(2, 93) => 8 31
(2, 96) => 8 32
(2, 99) => 8 33
(4, 51) => 8 34
(4, 54) => 8 36
(4, 57) => 8 38
(4, 60) => 8 40
(4, 63) => 8 42
(4, 66) => 8 44
(4, 69) => 8 46
(4, 72) => 8 48
(4, 75) => 8 50
(4, 78) => 8 52
(4, 81) => 8 54
(4, 84) => 8 56
(4, 87) => 8 58
(4, 90) => 8 60
(4, 93) => 8 62
(4, 96) => 8 64
(4, 99) => 8 66
(3, 4) => 9 2
(3, 6) => 9 3
(3, 8) => 9 4
(3, 10) => 9 5
(3, 12) => 9 6
(3, 14) => 9 7
(3, 16) => 9 8
(3, 18) => 9 9
(3, 20) => 9 10
(3, 22) => 9 11
(3, 24) => 9 12
(3, 26) => 9 13
(3, 28) => 9 14
(3, 30) => 9 15
(3, 32) => 9 16
(3, 34) => 9 17
(3, 36) => 9 18
(3, 38) => 9 19
(3, 40) => 9 20
(3, 42) => 9 21
(3, 44) => 9 22
(3, 46) => 9 23
(3, 48) => 9 24
(3, 50) => 9 25
(3, 52) => 9 26
(3, 54) => 9 27
(3, 56) => 9 28
(3, 58) => 9 29
(3, 60) => 9 30
(3, 62) => 9 31
(3, 64) => 9 32
(3, 66) => 9 33
(3, 68) => 9 34
(3, 70) => 9 35
(3, 72) => 9 36
(3, 74) => 9 37
(3, 76) => 9 38
(3, 78) => 9 39
(3, 80) => 9 40
(3, 82) => 9 41
(3, 84) => 9 42
(3, 86) => 9 43
(3, 88) => 9 44
(3, 90) => 9 45
(3, 92) => 9 46
(3, 94) => 9 47
(3, 96) => 9 48
(3, 98) => 9 49
(3, 100) => 9 50
(2, 8) => 16 2
(2, 12) => 16 3
(2, 16) => 16 4
(2, 20) => 16 5
(2, 24) => 16 6
(2, 28) => 16 7
(2, 32) => 16 8
(2, 36) => 16 9
(2, 40) => 16 10
(2, 44) => 16 11
(2, 48) => 16 12
(2, 52) => 16 13
(2, 56) => 16 14
(2, 60) => 16 15
(2, 64) => 16 16
(2, 68) => 16 17
(2, 72) => 16 18
(2, 76) => 16 19
(2, 80) => 16 20
(2, 84) => 16 21
(2, 88) => 16 22
(2, 92) => 16 23
(2, 96) => 16 24
(2, 100) => 16 25
(4, 52) => 16 26
(4, 54) => 16 27
(4, 56) => 16 28
(4, 58) => 16 29
(4, 60) => 16 30
(4, 62) => 16 31
(4, 64) => 16 32
(4, 66) => 16 33
(4, 68) => 16 34
(4, 70) => 16 35
(4, 72) => 16 36
(4, 74) => 16 37
(4, 76) => 16 38
(4, 78) => 16 39
(4, 80) => 16 40
(4, 82) => 16 41
(4, 84) => 16 42
(4, 86) => 16 43
(4, 88) => 16 44
(4, 90) => 16 45
(4, 92) => 16 46
(4, 94) => 16 47
(4, 96) => 16 48
(4, 98) => 16 49
(4, 100) => 16 50
(8, 68) => 16 51
(8, 72) => 16 54
(8, 76) => 16 57
(8, 80) => 16 60
(8, 84) => 16 63
(8, 88) => 16 66
(8, 92) => 16 69
(8, 96) => 16 72
(8, 100) => 16 75
(5, 4) => 25 2
(5, 6) => 25 3
(5, 8) => 25 4
(5, 10) => 25 5
(5, 12) => 25 6
(5, 14) => 25 7
(5, 16) => 25 8
(5, 18) => 25 9
(5, 20) => 25 10
(5, 22) => 25 11
(5, 24) => 25 12
(5, 26) => 25 13
(5, 28) => 25 14
(5, 30) => 25 15
(5, 32) => 25 16
(5, 34) => 25 17
(5, 36) => 25 18
(5, 38) => 25 19
(5, 40) => 25 20
(5, 42) => 25 21
(5, 44) => 25 22
(5, 46) => 25 23
(5, 48) => 25 24
(5, 50) => 25 25
(5, 52) => 25 26
(5, 54) => 25 27
(5, 56) => 25 28
(5, 58) => 25 29
(5, 60) => 25 30
(5, 62) => 25 31
(5, 64) => 25 32
(5, 66) => 25 33
(5, 68) => 25 34
(5, 70) => 25 35
(5, 72) => 25 36
(5, 74) => 25 37
(5, 76) => 25 38
(5, 78) => 25 39
(5, 80) => 25 40
(5, 82) => 25 41
(5, 84) => 25 42
(5, 86) => 25 43
(5, 88) => 25 44
(5, 90) => 25 45
(5, 92) => 25 46
(5, 94) => 25 47
(5, 96) => 25 48
(5, 98) => 25 49
(5, 100) => 25 50
(3, 6) => 27 2
(3, 9) => 27 3
(3, 12) => 27 4
(3, 15) => 27 5
(3, 18) => 27 6
(3, 21) => 27 7
(3, 24) => 27 8
(3, 27) => 27 9
(3, 30) => 27 10
(3, 33) => 27 11
(3, 36) => 27 12
(3, 39) => 27 13
(3, 42) => 27 14
(3, 45) => 27 15
(3, 48) => 27 16
(3, 51) => 27 17
(3, 54) => 27 18
(3, 57) => 27 19
(3, 60) => 27 20
(3, 63) => 27 21
(3, 66) => 27 22
(3, 69) => 27 23
(3, 72) => 27 24
(3, 75) => 27 25
(3, 78) => 27 26
(3, 81) => 27 27
(3, 84) => 27 28
(3, 87) => 27 29
(3, 90) => 27 30
(3, 93) => 27 31
(3, 96) => 27 32
(3, 99) => 27 33
(9, 51) => 27 34
(9, 54) => 27 36
(9, 57) => 27 38
(9, 60) => 27 40
(9, 63) => 27 42
(9, 66) => 27 44
(9, 69) => 27 46
(9, 72) => 27 48
(9, 75) => 27 50
(9, 78) => 27 52
(9, 81) => 27 54
(9, 84) => 27 56
(9, 87) => 27 58
(9, 90) => 27 60
(9, 93) => 27 62
(9, 96) => 27 64
(9, 99) => 27 66
(2, 10) => 32 2
(2, 15) => 32 3
(2, 20) => 32 4
(2, 25) => 32 5
(2, 30) => 32 6
(2, 35) => 32 7
(2, 40) => 32 8
(2, 45) => 32 9
(2, 50) => 32 10
(2, 55) => 32 11
(2, 60) => 32 12
(2, 65) => 32 13
(2, 70) => 32 14
(2, 75) => 32 15
(2, 80) => 32 16
(2, 85) => 32 17
(2, 90) => 32 18
(2, 95) => 32 19
(2, 100) => 32 20
(8, 35) => 32 21
(4, 55) => 32 22
(4, 60) => 32 24
(4, 65) => 32 26
(8, 45) => 32 27
(4, 70) => 32 28
(4, 75) => 32 30
(4, 80) => 32 32
(8, 55) => 32 33
(4, 85) => 32 34
(4, 90) => 32 36
(4, 95) => 32 38
(8, 65) => 32 39
(4, 100) => 32 40
(8, 70) => 32 42
(16, 55) => 32 44
(8, 75) => 32 45
(8, 80) => 32 48
(8, 85) => 32 51
(16, 65) => 32 52
(8, 90) => 32 54
(16, 70) => 32 56
(8, 95) => 32 57
(8, 100) => 32 60
(16, 80) => 32 64
(16, 85) => 32 68
(16, 90) => 32 72
(16, 95) => 32 76
(16, 100) => 32 80
(6, 4) => 36 2
(6, 6) => 36 3
(6, 8) => 36 4
(6, 10) => 36 5
(6, 12) => 36 6
(6, 14) => 36 7
(6, 16) => 36 8
(6, 18) => 36 9
(6, 20) => 36 10
(6, 22) => 36 11
(6, 24) => 36 12
(6, 26) => 36 13
(6, 28) => 36 14
(6, 30) => 36 15
(6, 32) => 36 16
(6, 34) => 36 17
(6, 36) => 36 18
(6, 38) => 36 19
(6, 40) => 36 20
(6, 42) => 36 21
(6, 44) => 36 22
(6, 46) => 36 23
(6, 48) => 36 24
(6, 50) => 36 25
(6, 52) => 36 26
(6, 54) => 36 27
(6, 56) => 36 28
(6, 58) => 36 29
(6, 60) => 36 30
(6, 62) => 36 31
(6, 64) => 36 32
(6, 66) => 36 33
(6, 68) => 36 34
(6, 70) => 36 35
(6, 72) => 36 36
(6, 74) => 36 37
(6, 76) => 36 38
(6, 78) => 36 39
(6, 80) => 36 40
(6, 82) => 36 41
(6, 84) => 36 42
(6, 86) => 36 43
(6, 88) => 36 44
(6, 90) => 36 45
(6, 92) => 36 46
(6, 94) => 36 47
(6, 96) => 36 48
(6, 98) => 36 49
(6, 100) => 36 50
(7, 4) => 49 2
(7, 6) => 49 3
(7, 8) => 49 4
(7, 10) => 49 5
(7, 12) => 49 6
(7, 14) => 49 7
(7, 16) => 49 8
(7, 18) => 49 9
(7, 20) => 49 10
(7, 22) => 49 11
(7, 24) => 49 12
(7, 26) => 49 13
(7, 28) => 49 14
(7, 30) => 49 15
(7, 32) => 49 16
(7, 34) => 49 17
(7, 36) => 49 18
(7, 38) => 49 19
(7, 40) => 49 20
(7, 42) => 49 21
(7, 44) => 49 22
(7, 46) => 49 23
(7, 48) => 49 24
(7, 50) => 49 25
(7, 52) => 49 26
(7, 54) => 49 27
(7, 56) => 49 28
(7, 58) => 49 29
(7, 60) => 49 30
(7, 62) => 49 31
(7, 64) => 49 32
(7, 66) => 49 33
(7, 68) => 49 34
(7, 70) => 49 35
(7, 72) => 49 36
(7, 74) => 49 37
(7, 76) => 49 38
(7, 78) => 49 39
(7, 80) => 49 40
(7, 82) => 49 41
(7, 84) => 49 42
(7, 86) => 49 43
(7, 88) => 49 44
(7, 90) => 49 45
(7, 92) => 49 46
(7, 94) => 49 47
(7, 96) => 49 48
(7, 98) => 49 49
(7, 100) => 49 50
(2, 12) => 64 2
(2, 18) => 64 3
(2, 24) => 64 4
(2, 30) => 64 5
(2, 36) => 64 6
(2, 42) => 64 7
(2, 48) => 64 8
(2, 54) => 64 9
(2, 60) => 64 10
(2, 66) => 64 11
(2, 72) => 64 12
(2, 78) => 64 13
(2, 84) => 64 14
(2, 90) => 64 15
(2, 96) => 64 16
(4, 51) => 64 17
(4, 54) => 64 18
(4, 57) => 64 19
(4, 60) => 64 20
(4, 63) => 64 21
(4, 66) => 64 22
(4, 69) => 64 23
(4, 72) => 64 24
(4, 75) => 64 25
(4, 78) => 64 26
(4, 81) => 64 27
(4, 84) => 64 28
(4, 87) => 64 29
(4, 90) => 64 30
(4, 93) => 64 31
(4, 96) => 64 32
(4, 99) => 64 33
(8, 68) => 64 34
(8, 70) => 64 35
(8, 72) => 64 36
(8, 74) => 64 37
(8, 76) => 64 38
(8, 78) => 64 39
(8, 80) => 64 40
(8, 82) => 64 41
(8, 84) => 64 42
(8, 86) => 64 43
(8, 88) => 64 44
(8, 90) => 64 45
(8, 92) => 64 46
(8, 94) => 64 47
(8, 96) => 64 48
(8, 98) => 64 49
(8, 100) => 64 50
(16, 78) => 64 52
(16, 81) => 64 54
(32, 66) => 64 55
(16, 84) => 64 56
(16, 87) => 64 58
(16, 90) => 64 60
(16, 93) => 64 62
(16, 96) => 64 64
(32, 78) => 64 65
(16, 99) => 64 66
(32, 84) => 64 70
(32, 90) => 64 75
(32, 96) => 64 80
(3, 8) => 81 2
(3, 12) => 81 3
(3, 16) => 81 4
(3, 20) => 81 5
(3, 24) => 81 6
(3, 28) => 81 7
(3, 32) => 81 8
(3, 36) => 81 9
(3, 40) => 81 10
(3, 44) => 81 11
(3, 48) => 81 12
(3, 52) => 81 13
(3, 56) => 81 14
(3, 60) => 81 15
(3, 64) => 81 16
(3, 68) => 81 17
(3, 72) => 81 18
(3, 76) => 81 19
(3, 80) => 81 20
(3, 84) => 81 21
(3, 88) => 81 22
(3, 92) => 81 23
(3, 96) => 81 24
(3, 100) => 81 25
(9, 52) => 81 26
(9, 54) => 81 27
(9, 56) => 81 28
(9, 58) => 81 29
(9, 60) => 81 30
(9, 62) => 81 31
(9, 64) => 81 32
(9, 66) => 81 33
(9, 68) => 81 34
(9, 70) => 81 35
(9, 72) => 81 36
(9, 74) => 81 37
(9, 76) => 81 38
(9, 78) => 81 39
(9, 80) => 81 40
(9, 82) => 81 41
(9, 84) => 81 42
(9, 86) => 81 43
(9, 88) => 81 44
(9, 90) => 81 45
(9, 92) => 81 46
(9, 94) => 81 47
(9, 96) => 81 48
(9, 98) => 81 49
(9, 100) => 81 50
(27, 68) => 81 51
(27, 72) => 81 54
(27, 76) => 81 57
(27, 80) => 81 60
(27, 84) => 81 63
(27, 88) => 81 66
(27, 92) => 81 69
(27, 96) => 81 72
(27, 100) => 81 75
(10, 4) => 100 2
(10, 6) => 100 3
(10, 8) => 100 4
(10, 10) => 100 5
(10, 12) => 100 6
(10, 14) => 100 7
(10, 16) => 100 8
(10, 18) => 100 9
(10, 20) => 100 10
(10, 22) => 100 11
(10, 24) => 100 12
(10, 26) => 100 13
(10, 28) => 100 14
(10, 30) => 100 15
(10, 32) => 100 16
(10, 34) => 100 17
(10, 36) => 100 18
(10, 38) => 100 19
(10, 40) => 100 20
(10, 42) => 100 21
(10, 44) => 100 22
(10, 46) => 100 23
(10, 48) => 100 24
(10, 50) => 100 25
(10, 52) => 100 26
(10, 54) => 100 27
(10, 56) => 100 28
(10, 58) => 100 29
(10, 60) => 100 30
(10, 62) => 100 31
(10, 64) => 100 32
(10, 66) => 100 33
(10, 68) => 100 34
(10, 70) => 100 35
(10, 72) => 100 36
(10, 74) => 100 37
(10, 76) => 100 38
(10, 78) => 100 39
(10, 80) => 100 40
(10, 82) => 100 41
(10, 84) => 100 42
(10, 86) => 100 43
(10, 88) => 100 44
(10, 90) => 100 45
(10, 92) => 100 46
(10, 94) => 100 47
(10, 96) => 100 48
(10, 98) => 100 49
(10, 100) => 100 50
*/
